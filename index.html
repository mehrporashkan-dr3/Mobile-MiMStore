<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>فرم درخواست خرید اقساطی – میم استور</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 1rem;
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    h2 {
      text-align: center;
      margin-top: 0;
      margin-bottom: .75rem;
      font-size: 1.1rem;
    }

    h3 {
      margin-top: 1.75rem;
      border-right: 3px solid #c00;
      padding-right: .5rem;
      font-size: 1rem;
    }

    p, label {
      font-size: .9rem;
    }

    input, select, textarea, button {
      font-family: inherit;
      font-size: .9rem;
      line-height: 1.4;
    }

    input[type="text"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      box-sizing: border-box;
      padding: .45rem .55rem;
      margin-bottom: .5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      outline: none;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: #c00;
      box-shadow: 0 0 0 2px rgba(204,0,0,0.12);
    }

    textarea {
      resize: vertical;
      min-height: 70px;
    }

    .terms-box {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: .75rem;
      font-size: .85rem;
      line-height: 1.9;
      text-align: justify;
      background: #fafafa;
    }

    .checkbox-row {
      display: block;
      margin-bottom: .5rem;
      font-size: .85rem;
      line-height: 1.7;
    }

    .checkbox-row input {
      margin-left: .4rem;
    }

    .buttons {
      display: flex;
      flex-direction: column;
      gap: .5rem;
      margin-top: .75rem;
    }

    .btn-main,
    .btn-secondary {
      width: 100%;
      padding: .75rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }

    .btn-main {
      background: #d32f2f;
      color: #fff;
    }

    .btn-secondary {
      background: #555;
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="container">
    <form id="mimstore-credit-form">
      <h2>فرم درخواست خرید اقساطی – میم استور</h2>

      <p style="text-align:justify; line-height:1.7;">
        لطفاً این فرم را تنها توسط متقاضی اصلی خرید اقساطی تکمیل کنید. تمامی اطلاعات، از جمله چک و مدارک اعتباری،
        باید به نام همان متقاضی (دارنده دسته‌چک) باشد.
      </p>

      <h3>۱. اطلاعات هویتی</h3>

      <label>نام و نام خانوادگی</label>
      <input type="text" name="full_name" required>

      <label>نام پدر</label>
      <input type="text" name="father_name" required>

      <label>کد ملی</label>
      <input type="text" name="national_id" required minlength="10" maxlength="10">

      <label>شماره شناسنامه</label>
      <input type="text" name="id_number" required>

      <label>محل صدور</label>
      <input type="text" name="id_place" required>

      <label>تاریخ تولد</label>
      <input type="text" name="birth_date" required>

      <label>وضعیت تأهل</label>
      <select name="marital_status" required>
        <option value="">انتخاب کنید</option>
        <option value="مجرد">مجرد</option>
        <option value="متأهل">متأهل</option>
      </select>

      <label>تحصیلات</label>
      <select name="education" required>
        <option value="">انتخاب کنید</option>
        <option value="دیپلم">دیپلم</option>
        <option value="کاردانی">کاردانی</option>
        <option value="کارشناسی">کارشناسی</option>
        <option value="ارشد">ارشد</option>
      </select>

      <h3>۲. اطلاعات تماس و آدرس</h3>

      <label>شماره موبایل</label>
      <input type="tel" name="mobile" required>

      <label>آدرس کامل</label>
      <textarea name="address" required></textarea>

      <label>کد پستی</label>
      <input type="text" name="postal_code" maxlength="10" required>

      <h3>۳. اطلاعات شغلی</h3>

      <label>شغل</label>
      <input type="text" name="job_title" required>

      <label>سابقه کار</label>
      <input type="number" name="job_years" required>

      <h3>۴. اطلاعات اعتبار</h3>

      <label>سقف اعتبار</label>
      <label class="checkbox-row"><input type="radio" name="credit_cap" value="۵۰ میلیون">۵۰ میلیون</label>
      <label class="checkbox-row"><input type="radio" name="credit_cap" value="۱۰۰ میلیون">۱۰۰ میلیون</label>

      <label>اعتبار موردنیاز</label>
      <input type="text" id="credit-needed" name="credit_needed">

      <label>مدل کالا</label>
      <input type="text" name="product_model">

      <h3>۵. قوانین</h3>
      <div class="terms-box">
        کارمزد، استعلام، شرایط قرارداد و ...
      </div>

      <label class="checkbox-row">
        <input type="checkbox" required> قوانین بالا را می‌پذیرم
      </label>

      <div class="buttons">
        <button type="submit" class="btn-main">ارسال به واتساپ</button>
        <button type="button" id="download-jpg" class="btn-secondary">دانلود فرم با کیفیت (PNG)</button>
      </div>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    // ارسال به واتساپ
    document.getElementById('mimstore-credit-form').addEventListener('submit', function(e) {
      e.preventDefault();

      const data = new FormData(this);
      let msg = '';

      for (let pair of data.entries()) {
        msg += pair[0] + ': ' + pair[1] + '\\n';
      }

      const wa = 'https://wa.me/98999926021?text=' + encodeURIComponent(msg);
      window.open(wa, '_blank');
    });

    // جداکننده سه‌رقمی عدد
    document.getElementById('credit-needed').addEventListener('input', function () {
      let x = this.value.replace(/[^0-9]/g, '');
      if (!x) return this.value = '';
      this.value = x.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    });

    // دانلود PNG با کیفیت بالا
    document.getElementById('download-jpg').addEventListener('click', function() {
      const form = document.getElementById('mimstore-credit-form');

      html2canvas(form, {
        scale: 4,
        backgroundColor: '#fff'
      }).then(canvas => {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = 'mimstore-form.png';
        link.click();
      });
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>فرم درخواست خرید اقساطی – میم استور</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 1rem;
    }
    .container {
      max-width: 720px;
      margin: 0 auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    h2 {
      text-align: center;
      margin-top: 0;
      margin-bottom: .75rem;
    }
    h3 {
      margin-top: 1.75rem;
      border-right: 3px solid #c00;
      padding-right: .5rem;
      font-size: 1rem;
    }
    p, label {
      font-size: .9rem;
    }
    input, select, textarea, button {
      font-family: inherit;
    }
    .field-group {
      margin-bottom: 1rem;
    }
    label span.required {
      color: #c00;
      margin-right: .25rem;
    }
    input[type="text"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      box-sizing: border-box;
      padding: .5rem .6rem;
      margin-top: .25rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      font-size: .9rem;
    }
    input[type="text"]:focus,
    input[type="tel"]:focus,
    input[type="number"]:focus,
    textarea:focus,
    select:focus {
      border-color: #d32f2f;
      box-shadow: 0 0 0 2px rgba(211,47,47,0.1);
    }
    textarea {
      min-height: 90px;
      resize: vertical;
    }
    .note {
      font-size: .8rem;
      color: #666;
      margin-top: .25rem;
      line-height: 1.6;
    }
    .terms-box {
      font-size: .85rem;
      padding: .75rem .9rem;
      border-radius: 10px;
      border: 1px solid #eee;
      background: #fcfcfc;
      margin-top: .75rem;
      margin-bottom: .75rem;
      line-height: 1.8;
      text-align: justify;
    }
    .checkbox-row {
      display: block;
      margin-bottom: .5rem;
      font-size: .85rem;
      line-height: 1.7;
    }
    .checkbox-row input {
      margin-left: .4rem;
    }
    button[type="submit"] {
      width: 100%;
      padding: .75rem;
      border: none;
      border-radius: 8px;
      background: #d32f2f;
      color: #fff;
      font-size: 1rem;
      cursor: pointer;
    }
    button[type="submit"]:hover {
      background: #b71c1c;
    }

    /* تنظیم ارتفاع و وسط بودن متن در فیلدها */
    input[type="text"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
      padding-top: .6rem;
      padding-bottom: .35rem;
    }

    .secondary-btn {
      width: 100%;
      padding: .75rem;
      border: none;
      border-radius: 8px;
      background: #eeeeee;
      color: #333;
      font-size: 1rem;
      cursor: pointer;
      margin-top: .5rem;
    }
    .secondary-btn:hover {
      background: #e0e0e0;
    }
  </style>
</head>
<body>
  <div class="container" id="form-wrapper">
    <form id="mimstore-credit-form">
      <h2>فرم درخواست خرید اقساطی – میم استور</h2>

      <p style="font-size:.9rem; line-height:1.8; text-align:justify;">
        لطفاً این فرم را با دقت تکمیل کنید. پس از ارسال، اطلاعات شما برای بررسی اعتبار و هماهنگی ادامه روند اقساط در واتساپ دریافت می‌شود.
        ارسال فرم به‌منزله عقد قطعی قرارداد نیست و نتیجه نهایی پس از اعتبارسنجی و تکمیل مدارک اعلام می‌گردد.
      </p>

      <!-- ۱. اطلاعات هویتی -->
      <h3>۱. اطلاعات هویتی متقاضی</h3>

      <div class="field-group">
        <label><span class="required">*</span>نام و نام خانوادگی</label>
        <input type="text" name="full_name" required>
      </div>

      <div class="field-group">
        <label><span class="required">*</span>نام پدر</label>
        <input type="text" name="father_name" required>
      </div>

      <div class="field-group">
        <label><span class="required">*</span>کد ملی</label>
        <input type="text" name="national_id" required>
      </div>

      <div class="field-group">
        <label>شماره شناسنامه</label>
        <input type="text" name="id_number">
      </div>

      <div class="field-group">
        <label>محل صدور شناسنامه</label>
        <input type="text" name="id_place">
      </div>

      <div class="field-group">
        <label>تاریخ تولد (مثال: 1371/10/25)</label>
        <input type="text" name="birth_date" placeholder="مثال: 1371/10/25">
      </div>

      <div class="field-group">
        <label>وضعیت تأهل</label>
        <select name="marital_status">
          <option value="">انتخاب کنید</option>
          <option value="مجرد">مجرد</option>
          <option value="متاهل">متأهل</option>
        </select>
      </div>

      <div class="field-group">
        <label>مدرک تحصیلی</label>
        <input type="text" name="education" placeholder="مثال: دیپلم، فوق دیپلم، لیسانس و ...">
      </div>

      <div class="field-group">
        <label><span class="required">*</span>شماره موبایل به نام خودتان</label>
        <input type="tel" name="mobile" required placeholder="مثال: 09XXXXXXXXX">
      </div>

      <!-- ۲. اطلاعات محل سکونت -->
      <h3>۲. اطلاعات محل سکونت</h3>

      <div class="field-group">
        <label><span class="required">*</span>نشانی کامل</label>
        <textarea name="address" required placeholder="شهر، خیابان، کوچه، پلاک، واحد"></textarea>
      </div>

      <div class="field-group">
        <label>کد پستی</label>
        <input type="text" name="postal_code">
      </div>

      <!-- ۳. اطلاعات شغلی -->
      <h3>۳. اطلاعات شغلی</h3>

      <div class="field-group">
        <label>عنوان شغلی</label>
        <input type="text" name="job_title" placeholder="مثال: فروشنده موبایل، کارمند، راننده، ...">
      </div>

      <div class="field-group">
        <label>سابقه کار (چند سال)</label>
        <input type="number" name="job_years" min="0" placeholder="مثال: 3">
      </div>

      <!-- ۴. اطلاعات اعتبار درخواستی -->
      <h3>۴. اطلاعات اعتبار درخواستی</h3>

      <div class="field-group">
        <label><span class="required">*</span>سقف اعتبار درخواستی</label>
        <select name="credit_cap" required>
          <option value="">انتخاب کنید</option>
          <option value="50,000,000">۵۰ میلیون تومان</option>
          <option value="100,000,000">۱۰۰ میلیون تومان (فقط برای خرید آیفون ۱۶ و ۱۷)</option>
        </select>
      </div>

      <div class="field-group">
        <label>اعتبار موردنیاز (در صورت کمتر بودن)</label>
        <input type="text" name="credit_needed" placeholder="مثال: 30,000,000">
        <div class="note">در صورت خالی‌گذاشتن، اعتبار تا سقف انتخاب‌شده بررسی می‌شود.</div>
      </div>

      <div class="field-group">
        <label>مدل کالا / توضیحات خرید</label>
        <input type="text" name="product_model" placeholder="مثال: iPhone 13 ، Samsung S24">
      </div>

      <div class="field-group">
        <label>توضیحات تکمیلی (اختیاری)</label>
        <textarea name="extra_note" placeholder="هر توضیحی لازم است بنویسید"></textarea>
      </div>

      <!-- ۵. مدارک -->
      <h3>۵. مدارک</h3>

      <p style="font-size:.9rem; line-height:1.8;">
        لطفاً پس از تکمیل و ارسال این فرم، <strong>یک عکس واضح از روی کارت ملی</strong> خود را نیز از طریق واتساپ ارسال نمایید.
        بدون ارسال کارت ملی، امکان تکمیل اعتبارسنجی وجود نخواهد داشت.
      </p>

      <!-- ۶. شرایط و مقررات -->
      <h3>۶. شرایط و مقررات</h3>

      <div class="terms-box">
        ۱. این فرم صرفاً برای بررسی اولیه اعتبار بوده و به‌تنهایی به‌منزله عقد قرارداد قطعی نیست.<br><br>
        ۲. سقف اعتبار در حال حاضر ۵۰ میلیون و ۱۰۰ میلیون تومان است که سقف ۱۰۰ میلیون فقط برای خرید آیفون ۱۶ و ۱۷ قابل استفاده می‌باشد.<br><br>
        ۳. مبلغ <strong>۲۵۰٬۰۰۰ تومان</strong> بابت هزینه بررسی، استعلام بانکی و تشکیل پرونده از متقاضی دریافت می‌شود.
        این مبلغ بابت خدمات اولیه بوده و در هیچ شرایطی (از جمله رد اعتبار یا انصراف متقاضی) قابل استرداد نیست.<br><br>
        ۴. نرخ خدمات مالی (سود ماهیانه) برابر با <strong>۱.۹٪ در ماه</strong> است و اقساط بر همین اساس محاسبه می‌گردد.<br><br>
        ۵. پس از تأیید اعتبار، مبلغ <strong>۱۱.۵٪ از کل اعتبار</strong> بابت هزینه خدمات تسهیلاتی و مالی دریافت می‌شود.
        این مبلغ از اصل اعتبار کسر نمی‌شود و باید جداگانه توسط متقاضی پرداخت گردد. پرداخت این هزینه، شرط ادامه روند قرارداد است.<br><br>
        ۶. برای عقد قرارداد، ارائه <strong>یک برگ چک صیادی بنفش</strong> به نام متقاضی الزامی است. ابتدا تصویر چک جهت بررسی دریافت می‌شود
        و سپس اصل چک باید از طریق پست برای شرکت ارسال گردد.<br><br>
        ۷. مدت زمان تقریبی دریافت اصل چک توسط شرکت <strong>۳ تا ۵ روز کاری</strong> برآورد می‌شود و در صورت وصول زودتر، مراحل سریع‌تر تکمیل می‌گردد.<br><br>
        ۸. <strong>نظر به نوسانات قیمت کالا، مبلغ نهایی خرید منوط به قیمت روز کالا در زمان تکمیل اعتبارسنجی و ثبت قرارداد بوده و بر اساس نرخ روز محاسبه می‌گردد.</strong>
      </div>

      <label class="checkbox-row">
        <input type="checkbox" name="agree_fee" required>
        متعهد می‌شوم مبلغ <strong>۲۵۰٬۰۰۰ تومان</strong> بابت استعلام و تشکیل پرونده پرداخت نمایم و آگاه هستم که این مبلغ در هیچ شرایطی قابل استرداد نیست.
      </label>

      <label class="checkbox-row">
        <input type="checkbox" name="agree_info" required>
        تأیید می‌کنم کلیه اطلاعات و مدارک ارائه‌شده صحیح و واقعی است و به واحد اعتباری میم‌استور اجازه استعلام لازم از مراجع مجاز را می‌دهم.
      </label>

      <label class="checkbox-row" style="margin-bottom:1rem;">
        <input type="checkbox" name="agree_terms" required>
        با مطالعه کامل شرایط فوق، نرخ خدمات مالی <strong>۱.۹٪</strong>، هزینه خدمات تسهیلاتی <strong>۱۱.۵٪</strong> و سایر موارد را می‌پذیرم و می‌دانم ارسال این فرم صرفاً جهت بررسی اولیه می‌باشد.
      </label>

      <button type="submit">ارسال و ثبت در واتساپ میم‌استور</button>
      <button type="button" class="secondary-btn" id="download-jpg-btn">دانلود تصویر فرم (JPG)</button>
    </form>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    document.getElementById('mimstore-credit-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const data = new FormData(this);
      let msg = 'درخواست خرید اقساطی میم‌استور\n\n';

      msg += 'نام و نام خانوادگی: ' + (data.get('full_name') || '') + '\n';
      msg += 'نام پدر: ' + (data.get('father_name') || '') + '\n';
      msg += 'کد ملی: ' + (data.get('national_id') || '') + '\n';
      msg += 'شماره شناسنامه: ' + (data.get('id_number') || '') + '\n';
      msg += 'محل صدور شناسنامه: ' + (data.get('id_place') || '') + '\n';
      msg += 'تاریخ تولد: ' + (data.get('birth_date') || '') + '\n';
      msg += 'وضعیت تأهل: ' + (data.get('marital_status') || '') + '\n';
      msg += 'تحصیلات: ' + (data.get('education') || '') + '\n';
      msg += 'موبایل: ' + (data.get('mobile') || '') + '\n\n';

      msg += 'آدرس: ' + (data.get('address') || '') + '\n';
      msg += 'کد پستی: ' + (data.get('postal_code') || '') + '\n\n';

      msg += 'عنوان شغلی: ' + (data.get('job_title') || '') + '\n';
      msg += 'سابقه کار (سال): ' + (data.get('job_years') || '') + '\n\n';

      msg += 'سقف اعتبار درخواستی: ' + (data.get('credit_cap') || '') + '\n';
      msg += 'اعتبار مورد نیاز: ' + (data.get('credit_needed') || '') + '\n';
      msg += 'مدل / توضیحات کالا: ' + (data.get('product_model') || '') + '\n';
      msg += 'توضیحات تکمیلی: ' + (data.get('extra_note') || '') + '\n\n';

      msg += '✅ کاربر شرایط و هزینه‌ها را پذیرفته است.\n';
      msg += 'یادآوری: لطفاً تصویر روی کارت ملی نیز در همین واتساپ ارسال شود.';

      // شماره واتساپ میم‌استور: 09999926021  →  بدون صفر + کد کشور
      const shopNumber = '989999926021';
      const waUrl = 'https://wa.me/' + shopNumber + '?text=' + encodeURIComponent(msg);

      window.open(waUrl, '_blank');
    });

    // فرمت خودکار عدد اعتبار مورد نیاز (تبدیل فارسی/انگلیسی و جداکننده هزارگان)
    const creditInput = document.querySelector('input[name="credit_needed"]');
    if (creditInput) {
      creditInput.addEventListener('input', function (e) {
        let value = e.target.value;

        // حذف کاماها
        value = value.replace(/,/g, '');

        // تبدیل اعداد فارسی به انگلیسی
        value = value.replace(/[۰-۹]/g, d => '۰۱۲۳۴۵۶۷۸۹'.indexOf(d));

        // حذف هر چیزی غیر از عدد
        value = value.replace(/[^0-9]/g, '');

        if (value.length > 0) {
          e.target.value = Number(value).toLocaleString('fa-IR');
        } else {
          e.target.value = '';
        }
      });
    }

    // دکمه دانلود تصویر فرم (JPG)
    const jpgBtn = document.getElementById('download-jpg-btn');
    if (jpgBtn) {
      jpgBtn.addEventListener('click', function () {
        const wrapper = document.getElementById('form-wrapper');
        if (!wrapper) return;
        html2canvas(wrapper, { scale: 2 }).then(canvas => {
          const link = document.createElement('a');
          link.href = canvas.toDataURL('image/jpeg', 0.9);
          link.download = 'mimstore-form.jpg';
          link.click();
        });
      });
    }
  </script>
</body>
</html>

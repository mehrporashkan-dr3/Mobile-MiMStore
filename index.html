<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ูุฑู ุฏุฑุฎูุงุณุช ุฎุฑุฏ ุงูุณุงุท โ ูู ุงุณุชูุฑ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 1rem;
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    h2 {
      text-align: center;
      margin-top: 0;
      margin-bottom: .75rem;
      font-size: 1.1rem;
    }

    h3 {
      margin-top: 1.75rem;
      border-right: 3px solid #c00;
      padding-right: .5rem;
      font-size: 1rem;
    }

    p, label {
      font-size: .9rem;
    }

    input, select, textarea, button {
      font-family: inherit;
      font-size: .9rem;
      line-height: 1.4;
    }

    input[type="text"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      box-sizing: border-box;
      padding: .45rem .55rem;
      margin-bottom: .5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      outline: none;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: #c00;
      box-shadow: 0 0 0 2px rgba(204,0,0,0.12);
    }

    textarea {
      resize: vertical;
      min-height: 70px;
    }

    .terms-box {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: .75rem;
      font-size: .85rem;
      line-height: 1.9;
      text-align: justify;
      background: #fafafa;
    }

    .checkbox-row {
      display: block;
      margin-bottom: .5rem;
      font-size: .85rem;
      line-height: 1.7;
    }

    .checkbox-row input {
      margin-left: .4rem;
    }

    /* ฺฉุงุฏุฑ ุงูุถุงุก */
    #signature-pad {
      border: 1px solid #777;
      border-radius: 6px;
      width: 100%;
      height: 160px;
      background: #fff;
      margin-top: .75rem;
      touch-action: none;
    }

    .signature-actions {
      margin-top: .5rem;
      display: flex;
      justify-content: flex-end;
      gap: .5rem;
    }

    .btn-main,
    .btn-secondary {
      width: 100%;
      padding: .75rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }

    .btn-main {
      background: #1ba64a;
      color: #fff;
    }

    .btn-main:hover {
      background: #14823a;
    }

    .btn-secondary {
      background: #333;
      color: #fff;
    }

    .btn-secondary:hover {
      background: #111;
    }

    .hint-text {
      margin-top: .6rem;
      font-size: .78rem;
      color: #555;
      text-align: justify;
    }
  </style>
</head>

<body>
<div class="container">
<form id="mimstore-credit-form">
        <h2>ูุฑู ุฏุฑุฎูุงุณุช ุฎุฑุฏ ุงูุณุงุท โ ูู ุงุณุชูุฑ</h2>

      <p style="text-align:justify; line-height:1.7;">
        ูุทูุงู ุงู ูุฑู ุฑุง ุชููุง ุชูุณุท ูุชูุงุถ ุงุตู ุฎุฑุฏ ุงูุณุงุท ุชฺฉูู ฺฉูุฏ.
        ููู ุงุทูุงุนุงุช ุจุงุฏ ุจู ูุงู ููุงู ูุชูุงุถ (ุฏุงุฑูุฏู ุฏุณุชูโฺฺฉ) ุจุงุดุฏ.
      </p>

      <!-- ฑ. ุงุทูุงุนุงุช ููุช ูุชูุงุถ -->
      <h3>ฑ. ุงุทูุงุนุงุช ููุช ูุชูุงุถ</h3>

      <label>ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</label>
      <input type="text" name="full_name" id="full-name" required placeholder="ูุซุงู: ุนู ุฑุถุง">

      <label>ูุงู ูพุฏุฑ</label>
      <input type="text" name="father_name" required placeholder="ูุซุงู: ุญุณู">

      <label>ฺฉุฏ ูู</label>
      <input type="text" name="national_id" required minlength="10" maxlength="10" placeholder="ฑฐ ุฑูู">

      <label>ุดูุงุฑู ุดูุงุณูุงูู</label>
      <input type="text" name="id_number" required>

      <label>ูุญู ุตุฏูุฑ ุดูุงุณูุงูู</label>
      <input type="text" name="id_place" required placeholder="ูุซุงู: ุชูุฑุงู">

      <label>ุชุงุฑุฎ ุชููุฏ (ุดูุณ)</label>
      <input type="text" name="birth_date" required placeholder="ูุซุงู: 1378/05/21">

      <label>ูุถุนุช ุชุฃูู</label>
      <select name="marital_status" required>
        <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
        <option value="ูุฌุฑุฏ">ูุฌุฑุฏ</option>
        <option value="ูุชุฃูู">ูุชุฃูู</option>
      </select>

      <label>ูุฒุงู ุชุญุตูุงุช</label>
      <select name="education" required>
        <option value="">ุงูุชุฎุงุจ ฺฉูุฏ</option>
        <option value="ุฏูพูู">ุฏูพูู</option>
        <option value="ฺฉุงุฑุฏุงู">ฺฉุงุฑุฏุงู</option>
        <option value="ฺฉุงุฑุดูุงุณ">ฺฉุงุฑุดูุงุณ</option>
        <option value="ฺฉุงุฑุดูุงุณ ุงุฑุดุฏ">ฺฉุงุฑุดูุงุณ ุงุฑุดุฏ</option>
        <option value="ุฏฺฉุชุฑ">ุฏฺฉุชุฑ</option>
      </select>

      <label>ุดูุงุฑู ููุจุงู (ุจู ูุงู ุฎูุฏุชุงู)</label>
      <input type="tel" name="mobile" required placeholder="ูุซุงู: 09XXXXXXXXX">

      <!-- ฒ. ุงุทูุงุนุงุช ูุญู ุณฺฉููุช -->
      <h3>ฒ. ุงุทูุงุนุงุช ูุญู ุณฺฉููุช</h3>

      <label>ูุดุงู ฺฉุงูู</label>
      <textarea name="address" required placeholder="ุดูุฑุ ุฎุงุจุงูุ ฺฉูฺูุ ูพูุงฺฉุ ูุงุญุฏ"></textarea>

      <label>ฺฉุฏ ูพุณุช</label>
      <input type="text" name="postal_code" required minlength="10" maxlength="10">

      <!-- ณ. ุงุทูุงุนุงุช ุดุบู -->
      <h3>ณ. ุงุทูุงุนุงุช ุดุบู</h3>

      <label>ุดุบู / ุนููุงู ุดุบู</label>
      <input type="text" name="job_title" required placeholder="ูุซุงู: ูุฑูุดูุฏู ููุจุงู">

      <label>ุณุงุจูู ฺฉุงุฑ (ฺูุฏ ุณุงู)</label>
      <input type="number" name="job_years" min="0" required placeholder="ูุซุงู: ณ">

      <!-- ด. ุงุทูุงุนุงุช ุงุนุชุจุงุฑ -->
      <h3>ด. ุงุทูุงุนุงุช ุงุนุชุจุงุฑ ุฏุฑุฎูุงุณุช</h3>

      <p style="margin-bottom:.4rem;">ุณูู ุงุนุชุจุงุฑ</p>
      <label class="checkbox-row">
        <input type="radio" name="credit_cap" value="ตฐ ูููู ุชููุงู" required> ตฐ ูููู ุชููุงู
      </label>

      <label class="checkbox-row">
        <input type="radio" name="credit_cap" value="ฑฐฐ ูููู ุชููุงู (ูฺู ุขููู ฑถ ู ฑท)"> ฑฐฐ ูููู ุชููุงู (ุขููู ฑถ ู ฑท)
      </label>

      <label>ุงุนุชุจุงุฑ ููุฑุฏ ูุงุฒ (ุฏุฑ ุตูุฑุช ฺฉูุชุฑ ุจูุฏู)</label>
      <input type="text" id="credit-needed" name="credit_needed" placeholder="ูุซุงู: 30,000,000">

      <label>ูุฏู ฺฉุงูุง</label>
      <input type="text" name="product_model" placeholder="ูุซุงู: iPhone 13 , Samsung S24">

      <label>ุชูุถุญุงุช (ุงุฎุชุงุฑ)</label>
      <textarea name="extra_note" placeholder="ุชูุถุญุงุช ุจุดุชุฑ"></textarea>

      <!-- ต. ูุฏุงุฑฺฉ -->
      <h3>ต. ูุฏุงุฑฺฉ</h3>

      <p style="font-size:.9rem; line-height:1.7; text-align:justify;">
        ูพุณ ุงุฒ ุงุฑุณุงู ุงู ูุฑูุ ุงุฑุณุงู ุชุตูุฑ ูุงุถุญ ฺฉุงุฑุช ูู ุจู ูุงุชุณุงูพ ููโุงุณุชูุฑ ุงูุฒุงู ุงุณุช.
      </p>
      <!-- ถ. ุดุฑุงุท ู ุงูุถุงุก ุงูฺฉุชุฑููฺฉ -->
      <h3>ถ. ุดุฑุงุทุ ููุฑุฑุงุช ู ุงูุถุงุก ูุชูุงุถ</h3>

      <div id="confirm-section">

        <div class="terms-box">
          1. ุงู ูุฑู ุตุฑูุงู ุฌูุช <strong>ุจุฑุฑุณ ุงููู ุงุนุชุจุงุฑ</strong> ูโุจุงุดุฏ ู ุจูโุชููุง ุจูโููุฒูู ุนูุฏ ูุฑุงุฑุฏุงุฏ ูุทุน ูุณุช.<br><br>

          2. ุณูู ุงุนุชุจุงุฑ ูุงุจู ุงุฑุงุฆู <strong>ตฐ ูููู ุชููุงู</strong> ู <strong>ฑฐฐ ูููู ุชููุงู</strong> ุงุณุช. ุณูู ฑฐฐ ูููู ุชููุงู ูฺู ุจุฑุฎ ูุฏูโูุง ูุงููุฏ ุขููู ฑถ ู ฑท ูโุจุงุดุฏ.<br><br>

          3. ูุจูุบ <strong>ฒตฐูฌฐฐฐ ุชููุงู</strong> ุจุงุจุช ุซุจุชโูุงูุ ุงุณุชุนูุงู ุงุนุชุจุงุฑ ู ุชุดฺฉู ูพุฑููุฏู ุฏุฑุงูุช ูโุดูุฏ. ุงู ูุจูุบ <strong>ุบุฑูุงุจู ุงุณุชุฑุฏุงุฏ</strong> ุงุณุชุ ุญุช ุฏุฑ ุตูุฑุช ุฑุฏ ุงุนุชุจุงุฑ ุง ุงูุตุฑุงู ูุชูุงุถ.<br><br>

          4. <strong>ูุฑุฎ ุฎุฏูุงุช ูุงู (ุณูุฏ ูุงูุงูู) ฑ.นูช</strong> ุงุณุช.<br><br>

          5. ูพุณ ุงุฒ ุชุฃุฏ ุงุนุชุจุงุฑุ ูุจูุบ <strong>ฑฑ.ตูช ุงุฒ ฺฉู ุงุนุชุจุงุฑ</strong> ุจุงุจุช ุฎุฏูุงุช ุชุณููุงุช ุฏุฑุงูุช ูโุดูุฏ ู ุงุฒ ุงุตู ุงุนุชุจุงุฑ ฺฉุณุฑ ููโฺฏุฑุฏุฏ.<br><br>

          6. ฺฉ ุจุฑฺฏ <strong>ฺฺฉ ุตุงุฏ ุจููุด</strong> ุจู ูุงู ูุชูุงุถ ุฌูุช ุถูุงูุช ุงูุฒุงู ุงุณุช. ุชุตูุฑ ุขู ุจุฑุฑุณ ูโุดูุฏ ู ุงุตู ฺฺฉ ุจุงุฏ ูพุณุช ุดูุฏ.<br><br>

          7. ุฒูุงู ุฏุฑุงูุช ฺฺฉ ุชูุณุท ุดุฑฺฉุช ูุนูููุงู <strong>ณ ุชุง ต ุฑูุฒ ฺฉุงุฑ</strong> ุงุณุช. ุชฺฉูู ุซุจุช ุงุนุชุจุงุฑ ูพุณ ุงุฒ ุฏุฑุงูุช ุงุตู ฺฺฉ ุงูุฌุงู ูโุดูุฏ.<br><br>

          8. ุจุง ุชูุฌู ุจู ููุณุงูุงุช ููุชุ <strong>ููุช ููุง ฺฉุงูุง ุจุฑ ุงุณุงุณ ูุฑุฎ ุฑูุฒ ุฒูุงู ุนูุฏ ูุฑุงุฑุฏุงุฏ</strong> ูุญุงุณุจู ูโฺฏุฑุฏุฏ.
        </div>

        <!-- ุชฺฉโูุง ุชุงุฏ -->
        <label class="checkbox-row">
          <input type="checkbox" id="agree_fee" required>
          ูุจูุบ ฒตฐูฌฐฐฐ ุชููุงู ุจุงุจุช ุชุดฺฉู ูพุฑููุฏู ุฑุง ูโูพุฐุฑู ู ุงุฒ ุบุฑูุงุจู ุงุณุชุฑุฏุงุฏ ุจูุฏู ุขู ุขฺฏุงูู.
        </label>

        <label class="checkbox-row">
          <input type="checkbox" id="agree_info" required>
          ุชูุงู ุงุทูุงุนุงุช ูุงุฑุฏ ุดุฏู ุตุญุญ ุจูุฏู ู ุจู ููโุงุณุชูุฑ ุงุฌุงุฒู ุงุณุชุนูุงู ุงุฒ ูุฑุงุฌุน ูุฌุงุฒ ุฑุง ูโุฏูู.
        </label>

        <label class="checkbox-row">
          <input type="checkbox" id="agree_terms" required>
          ฺฉูู ุดุฑุงุทุ ูุฑุฎ ฑ.นูช ู ูุฒูู ฑฑ.ตูช ุฑุง ูุทุงูุนู ฺฉุฑุฏู ู ูโูพุฐุฑู.
        </label>

        <!-- ุงูุถุงุก ุงูฺฉุชุฑููฺฉ -->
        <div class="signature-panel">
          <p>ูุทูุงู ุงูุถุง ุฎูุฏ ุฑุง ุฏุฑ ฺฉุงุฏุฑ ุฒุฑ ูุงุฑุฏ ฺฉูุฏ:</p>

          <canvas id="signature-pad"></canvas>

          <div class="signature-actions">
            <button type="button" id="clear-signature" style="padding:.4rem .8rem; font-size:.8rem; background:#c62828; color:white; border-radius:6px; border:none;">ูพุงฺฉ ฺฉุฑุฏู ุงูุถุงุก</button>
          </div>
        </div>

      </div>
      <!-- ฺฉุชุงุจุฎุงูู html2canvas ุจุฑุง ุณุงุฎุช PNG -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
          integrity="sha512-BNa5lK2nq2PpPAmhpN6wX+edE2l50Tzw9uQWGWpZjYG1ChcxrFAuo0xO+ogzAm8h1Hn0pVITwW2N9Q4vNKOu0w=="
          crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    /* ===============================
       1. ุงูุถุง ุงูฺฉุชุฑููฺฉ (Canvas)
       =============================== */

    const canvas = document.getElementById("signature-pad");
    const ctx = canvas.getContext("2d");

    // ุชูุธู ุณุงุฒ ฺฉุงุฏุฑ ุงูุถุง
    function resizeCanvas() {
      const ratio = window.devicePixelRatio || 1;
      canvas.width = canvas.offsetWidth * ratio;
      canvas.height = canvas.offsetHeight * ratio;
      ctx.scale(ratio, ratio);
      ctx.lineWidth = 2;
      ctx.lineCap = "round";
      ctx.strokeStyle = "#000";
    }
    resizeCanvas();

    let drawing = false;

    canvas.addEventListener("pointerdown", (e) => {
      drawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    });

    canvas.addEventListener("pointermove", (e) => {
      if (!drawing) return;
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
    });

    canvas.addEventListener("pointerup", () => drawing = false);
    canvas.addEventListener("pointerleave", () => drawing = false);

    // ุฏฺฉูู ูพุงฺฉ ฺฉุฑุฏู ุงูุถุงุก
    document.getElementById("clear-signature").addEventListener("click", () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });


    /* ===============================
       2. ุฏุงูููุฏ PNG ุงุฒ ุจุฎุด ุงูุถุงุก + ุดุฑุงุท
       =============================== */

    document.getElementById("download-terms-png").addEventListener("click", () => {
      const fee = document.getElementById("agree_fee");
      const info = document.getElementById("agree_info");
      const terms = document.getElementById("agree_terms");

      if (!fee.checked || !info.checked || !terms.checked) {
        alert("ูุทูุงู ููู ุชฺฉโูุง ุฑุง ุจุฒูุฏ.");
        return;
      }

      // ฺฺฉ ุดูุฏ ฺฉู ุงูุถุงุก ุฎุงู ูุจุงุดุฏ
      const blank = document.createElement("canvas");
      blank.width = canvas.width;
      blank.height = canvas.height;

      if (canvas.toDataURL() === blank.toDataURL()) {
        alert("ูุทูุงู ุงุจุชุฏุง ุงูุถุงุก ฺฉูุฏ.");
        return;
      }

      const section = document.getElementById("confirm-section");

      html2canvas(section, {
        scale: 3,
        backgroundColor: "#ffffff"
      }).then(canvasImage => {
        const link = document.createElement("a");
        link.href = canvasImage.toDataURL("image/png");
        link.download = "mimstore-terms-signature.png";
        link.click();
      });
    });


    /* ===============================
       3. ุงุฑุณุงู ูุงุชุณุงูพ
       =============================== */

    document.getElementById("mimstore-credit-form").addEventListener("submit", function (e) {
      e.preventDefault();

      const data = new FormData(this);
      let msg = "ุฏุฑุฎูุงุณุช ุฎุฑุฏ ุงูุณุงุท ููโุงุณุชูุฑ\n\n";

      msg += "ูุงู ู ูุงู ุฎุงููุงุฏฺฏ: " + (data.get("full_name") || "") + "\n";
      msg += "ูุงู ูพุฏุฑ: " + (data.get("father_name") || "") + "\n";
      msg += "ฺฉุฏ ูู: " + (data.get("national_id") || "") + "\n";
      msg += "ุดูุงุฑู ุดูุงุณูุงูู: " + (data.get("id_number") || "") + "\n";
      msg += "ูุญู ุตุฏูุฑ: " + (data.get("id_place") || "") + "\n";
      msg += "ุชุงุฑุฎ ุชููุฏ: " + (data.get("birth_date") || "") + "\n";
      msg += "ูุถุนุช ุชุฃูู: " + (data.get("marital_status") || "") + "\n";
      msg += "ุชุญุตูุงุช: " + (data.get("education") || "") + "\n";
      msg += "ููุจุงู: " + (data.get("mobile") || "") + "\n\n";

      msg += "ุขุฏุฑุณ: " + (data.get("address") || "") + "\n";
      msg += "ฺฉุฏ ูพุณุช: " + (data.get("postal_code") || "") + "\n\n";

      msg += "ุดุบู: " + (data.get("job_title") || "") + "\n";
      msg += "ุณุงุจูู ฺฉุงุฑ: " + (data.get("job_years") || "") + " ุณุงู\n\n";

      msg += "ุณูู ุงุนุชุจุงุฑ: " + (data.get("credit_cap") || "") + "\n";
      msg += "ุงุนุชุจุงุฑ ููุฑุฏ ูุงุฒ: " + (data.get("credit_needed") || "") + "\n";
      msg += "ูุฏู ฺฉุงูุง: " + (data.get("product_model") || "") + "\n";
      msg += "ุชูุถุญุงุช: " + (data.get("extra_note") || "") + "\n\n";

      msg += "๐ป ูุทูุงู ุชุตูุฑ ฺฉุงุฑุช ูู ู ุชุตูุฑ ุดุฑุงุท ู ุงูุถุงุก ุฑุง ูุฒ ุงุฑุณุงู ฺฉูุฏ.\n";

      // ุดูุงุฑู ูุงุชุณุงูพ ูุบุงุฒู (ุจุฏูู ุตูุฑ + 98)
      const shopNumber = "98999926021"; 
      const waUrl = "https://wa.me/" + shopNumber + "?text=" + encodeURIComponent(msg);

      window.open(waUrl, "_blank");
    });


    /* ===============================
       4. ูุฑูุช ุณูโุฑูู ุนุฏุฏ ุงุนุชุจุงุฑ
       =============================== */

    const creditInput = document.getElementById("credit-needed");
    creditInput.addEventListener("input", function () {
      let v = this.value.replace(/[^0-9]/g, "");
      if (!v) return (this.value = "");
      this.value = v.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    });
  </script>

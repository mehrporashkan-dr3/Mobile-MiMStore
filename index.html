<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>فرم درخواست خرید اقساطی – میم استور</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 1rem;
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    h2 {
      text-align: center;
      margin-top: 0;
      margin-bottom: .75rem;
      font-size: 1.1rem;
    }

    h3 {
      margin-top: 1.75rem;
      border-right: 3px solid #c00;
      padding-right: .5rem;
      font-size: 1rem;
    }

    p, label {
      font-size: .9rem;
    }

    input, select, textarea, button {
      font-family: inherit;
      font-size: .9rem;
      line-height: 1.4;
    }

    input[type="text"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      box-sizing: border-box;
      padding: .45rem .55rem;
      margin-bottom: .5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      outline: none;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: #c00;
      box-shadow: 0 0 0 2px rgba(204,0,0,0.12);
    }

    textarea {
      resize: vertical;
      min-height: 70px;
    }

    .terms-box {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: .75rem;
      font-size: .85rem;
      line-height: 1.9;
      text-align: justify;
      background: #fafafa;
    }

    .checkbox-row {
      display: block;
      margin-bottom: .5rem;
      font-size: .85rem;
      line-height: 1.7;
    }

    .checkbox-row input {
      margin-left: .4rem;
    }

    .buttons {
      display: flex;
      flex-direction: column;
      gap: .5rem;
      margin-top: .75rem;
    }

    .btn-main,
    .btn-secondary {
      width: 100%;
      padding: .75rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }

    .btn-main {
      background: #d32f2f;
      color: #fff;
    }

    .btn-main:hover {
      background: #b71c1c;
    }

    .btn-secondary {
      background: #eee;
      color: #333;
    }

    .btn-secondary:hover {
      background: #ddd;
    }
  </style>
</head>
<body>
  <div class="container">
    <form id="mimstore-credit-form">
      <h2>فرم درخواست خرید اقساطی – میم استور</h2>

      <p style="text-align:justify; line-height:1.7;">
        لطفاً این فرم را تنها توسط متقاضی اصلی خرید اقساطی تکمیل کنید. تمامی اطلاعات، از جمله چک و مدارک اعتباری،
        باید به نام همان متقاضی (دارنده دسته‌چک) باشد. در صورت مغایرت، بررسی درخواست انجام نخواهد شد.
      </p>

      <!-- ۱. اطلاعات هویتی متقاضی -->
      <h3>۱. اطلاعات هویتی متقاضی</h3>

      <label>نام و نام خانوادگی</label>
      <input type="text" name="full_name" required placeholder="مثال: علی رضایی">

      <label>نام پدر</label>
      <input type="text" name="father_name" required placeholder="مثال: حسن">

      <label>کد ملی</label>
      <input type="text" name="national_id" required minlength="10" maxlength="10" placeholder="۱۰ رقم">

      <label>شماره شناسنامه</label>
      <input type="text" name="id_number" required>

      <label>محل صدور شناسنامه</label>
      <input type="text" name="id_place" required placeholder="مثال: تهران">

      <label>تاریخ تولد (شمسی)</label>
      <input type="text" name="birth_date" required placeholder="مثال: 1378/05/21">

      <label>وضعیت تأهل</label>
      <select name="marital_status" required>
        <option value="">انتخاب کنید</option>
        <option value="مجرد">مجرد</option>
        <option value="متأهل">متأهل</option>
      </select>

      <label>میزان تحصیلات</label>
      <select name="education" required>
        <option value="">انتخاب کنید</option>
        <option value="دیپلم">دیپلم</option>
        <option value="کاردانی">کاردانی</option>
        <option value="کارشناسی">کارشناسی</option>
        <option value="کارشناسی ارشد">کارشناسی ارشد</option>
        <option value="دکتری">دکتری</option>
      </select>

      <label>شماره موبایل به نام خودتان</label>
      <input type="tel" name="mobile" required placeholder="مثال: 09XXXXXXXXX">

      <!-- ۲. اطلاعات محل سکونت -->
      <h3>۲. اطلاعات محل سکونت</h3>

      <label>نشانی کامل محل سکونت</label>
      <textarea name="address" required placeholder="شهر، خیابان، کوچه، پلاک، واحد"></textarea>

      <label>کد پستی</label>
      <input type="text" name="postal_code" required minlength="10" maxlength="10">

      <!-- ۳. اطلاعات شغلی -->
      <h3>۳. اطلاعات شغلی</h3>

      <label>شغل / عنوان شغلی</label>
      <input type="text" name="job_title" required placeholder="مثال: فروشنده موبایل">

      <label>سابقه کار (چند سال)</label>
      <input type="number" name="job_years" min="0" required placeholder="مثال: ۳">

      <!-- ۴. اطلاعات اعتبار درخواستی -->
      <h3>۴. اطلاعات اعتبار درخواستی</h3>

      <p style="margin-bottom:.4rem;">سقف اعتبار درخواستی</p>
      <label class="checkbox-row">
        <input type="radio" name="credit_cap" value="۵۰ میلیون تومان" required>
        ۵۰ میلیون تومان
      </label>
      <label class="checkbox-row" style="margin-bottom:.6rem;">
        <input type="radio" name="credit_cap" value="۱۰۰ میلیون تومان (آیفون ۱۶ و ۱۷)">
        ۱۰۰ میلیون تومان (فقط برای خرید آیفون ۱۶ و ۱۷)
      </label>

      <label>اعتبار مورد نیاز (در صورت کمتر بودن)</label>
      <input type="text" id="credit-needed" name="credit_needed" placeholder="مثال: 30,000,000">

      <label>مدل کالا / توضیحات خرید</label>
      <input type="text" name="product_model" placeholder="مثال: iPhone 13 ، Samsung S24">

      <label>توضیحات تکمیلی (اختیاری)</label>
      <textarea name="extra_note" placeholder="هر توضیحی لازم است بنویسید"></textarea>

      <!-- ۵. مدارک -->
      <h3>۵. مدارک</h3>

      <p style="font-size:.9rem; line-height:1.7; text-align:justify;">
        پس از ارسال این فرم، <strong>ارسال تصویر واضح روی کارت ملی از طریق واتساپ به شماره میم‌استور الزامی است.</strong><br>
        بدون دریافت تصویر کارت ملی، امکان ادامه روند اعتبارسنجی وجود نخواهد داشت.
      </p>

      <!-- ۶. شرایط و مقررات -->
      <h3>۶. شرایط و مقررات (خلاصه)</h3>

      <div class="terms-box">
        1. این فرم صرفاً جهت <strong>بررسی اولیه اعتبار</strong> می‌باشد و به‌تنهایی به‌منزله عقد قرارداد قطعی نیست.<br><br>
        2. سقف اعتبار قابل ارائه <strong>۵۰ میلیون تومان</strong> و <strong>۱۰۰ میلیون تومان</strong> است. سقف ۱۰۰ میلیون تومان ویژه برخی مدل‌های منتخب (از جمله آیفون ۱۶ و ۱۷) می‌باشد.<br><br>
        3. مبلغ <strong>۲۵۰٬۰۰۰ تومان</strong> بابت هزینه خدمات ثبت‌نام، استعلام اعتباری و تشکیل پرونده دریافت می‌شود. با توجه به انجام فرآیندهای اداری، این مبلغ
        <strong>در هیچ شرایطی (از جمله رد اعتبار یا انصراف متقاضی) قابل استرداد نمی‌باشد.</strong><br><br>
        4. <strong>نرخ خدمات مالی (سود ماهیانه) ۱.۹٪</strong> بوده و مبلغ اقساط بر این اساس محاسبه می‌گردد.<br><br>
        5. پس از تأیید اعتبار، مبلغ <strong>۱۱.۵٪ از کل اعتبار درخواستی</strong> تحت عنوان <strong>هزینه خدمات تسهیلاتی و مالی</strong> دریافت می‌شود. این مبلغ از اصل اعتبار کسر نمی‌گردد و پرداخت آن شرط ادامه روند قرارداد است.<br><br>
        6. برای عقد قرارداد، ارائه <strong>یک برگ چک صیادی بنفش به نام متقاضی</strong> الزامی است. ابتدا تصویر چک بررسی می‌شود و سپس اصل چک باید از طریق پست برای شرکت ارسال گردد.<br><br>
        7. مدت زمان تقریبی دریافت اصل چک توسط شرکت <strong>۳ تا ۵ روز کاری</strong> است. فعال‌سازی اعتبار پس از تحویل فیزیکی چک انجام می‌شود و در صورت وصول زودتر، مراحل سریع‌تر تکمیل می‌گردد.<br><br>
        8. <strong>نظر به نوسانات قیمت کالا، مبلغ نهایی خرید منوط به زمان تکمیل مراحل و ثبت قرارداد بوده و بر اساس نرخ روز محاسبه می‌گردد.</strong>
      </div>

      <label class="checkbox-row">
        <input type="checkbox" name="agree_fee" required>
        متعهد می‌شوم مبلغ <strong>۲۵۰٬۰۰۰ تومان</strong> بابت استعلام و تشکیل پرونده را پرداخت نمایم و آگاه هستم که این مبلغ در هیچ شرایطی قابل استرداد نیست.
      </label>

      <label class="checkbox-row">
        <input type="checkbox" name="agree_info" required>
        تأیید می‌کنم کلیه اطلاعات و مدارک ارائه‌شده صحیح و واقعی است و به واحد اعتباری میم‌استور اجازه استعلام لازم از مراجع مجاز را می‌دهم.
      </label>

      <label class="checkbox-row" style="margin-bottom:1rem;">
        <input type="checkbox" name="agree_terms" required>
        با مطالعه کامل شرایط فوق، نرخ خدمات مالی <strong>۱.۹٪</strong> و هزینه خدمات تسهیلاتی <strong>۱۱.۵٪</strong> را می‌پذیرم و می‌دانم ارسال این فرم صرفاً جهت بررسی اولیه می‌باشد.
      </label>

      <div class="buttons">
        <button type="submit" class="btn-main">ارسال و ثبت در واتساپ میم‌استور</button>
        <button type="button" id="download-jpg" class="btn-secondary">دانلود تصویر فرم (JPG)</button>
      </div>
    </form>
  </div>

  <!-- html2canvas از jsDelivr بدون دردسر -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    // ارسال اطلاعات به واتساپ (فقط متن)
    document.getElementById('mimstore-credit-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const data = new FormData(this);
      let msg = 'درخواست خرید اقساطی میم‌استور\\n\\n';

      msg += 'نام و نام خانوادگی: ' + (data.get('full_name') || '') + '\\n';
      msg += 'نام پدر: ' + (data.get('father_name') || '') + '\\n';
      msg += 'کد ملی: ' + (data.get('national_id') || '') + '\\n';
      msg += 'شماره شناسنامه: ' + (data.get('id_number') || '') + '\\n';
      msg += 'محل صدور شناسنامه: ' + (data.get('id_place') || '') + '\\n';
      msg += 'تاریخ تولد: ' + (data.get('birth_date') || '') + '\\n';
      msg += 'وضعیت تأهل: ' + (data.get('marital_status') || '') + '\\n';
      msg += 'تحصیلات: ' + (data.get('education') || '') + '\\n';
      msg += 'موبایل: ' + (data.get('mobile') || '') + '\\n\\n';

      msg += 'آدرس محل سکونت: ' + (data.get('address') || '') + '\\n';
      msg += 'کد پستی: ' + (data.get('postal_code') || '') + '\\n\\n';

      msg += 'شغل: ' + (data.get('job_title') || '') + '\\n';
      msg += 'سابقه کار (سال): ' + (data.get('job_years') || '') + '\\n\\n';

      msg += 'سقف اعتبار درخواستی: ' + (data.get('credit_cap') || '') + '\\n';
      msg += 'اعتبار مورد نیاز: ' + (data.get('credit_needed') || '') + '\\n';
      msg += 'مدل / توضیحات کالا: ' + (data.get('product_model') || '') + '\\n';
      msg += 'توضیحات تکمیلی: ' + (data.get('extra_note') || '') + '\\n\\n';

      msg += '✅ کاربر شرایط و هزینه‌ها را پذیرفته است.\\n';
      msg += 'یادآوری: لطفاً تصویر روی کارت ملی و تصویر فرم دانلودشده را نیز در همین واتساپ ارسال کنید.';

      // شماره واتساپ: 09999926021 → با کد کشور
      const shopNumber = '989999926021';
      const waUrl = 'https://wa.me/' + shopNumber + '?text=' + encodeURIComponent(msg);

      window.open(waUrl, '_blank');
    });

    // فرمت سه‌رقمی برای اعتبار موردنیاز
    const creditInput = document.getElementById('credit-needed');
    creditInput.addEventListener('input', function () {
      let val = this.value.replace(/[^0-9]/g, '');
      if (!val) {
        this.value = '';
        return;
      }
      this.value = val.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    });

    // دکمه دانلود JPG (کیفیت بالا) + هندل خطا
    document.getElementById('download-jpg').addEventListener('click', function () {
      if (typeof html2canvas === 'undefined') {
        alert('مشکل در بارگذاری ابزار ساخت تصویر. لطفاً یک بار صفحه را رفرش کنید.');
        return;
      }

      const form = document.getElementById('mimstore-credit-form');

      html2canvas(form, {
        scale: 4,              // کیفیت بالا
        useCORS: true,
        backgroundColor: '#ffffff',
        scrollY: -window.scrollY
      }).then(canvas => {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/jpeg', 1.0); // کیفیت ۱۰۰٪
        link.download = 'mimstore-form-hd.jpg';
        link.click();
      }).catch(err => {
        console.error(err);
        alert('در ساخت تصویر مشکلی پیش آمد. لطفاً دوباره امتحان کنید.');
      });
    });
  </script>
</body>
</html>
